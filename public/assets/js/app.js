!function(){"use strict";angular.module("rdApp",["ngRoute"])}(),function(){"use strict";angular.module("rdApp","").config(["$routeProvider","$locationProvider",function(t,n){t.when("/",{templateUrl:"/app/contacts/default.html"}).when("/edit/:id",{templateUrl:"/app/contacts/edit.html",controller:"EditController as vm"}).when("/add",{templateUrl:"/app/contacts/edit.html",controller:"AddController as vm"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}])}(),function(){"use strict";function t(t,n,e){function o(o){return e.addContact(o).then(function(e){n.path("/edit/"+e.data._id),t.location.reload()})}var r=this;r.titlePrefix="Add",r.buttonLabel="Add Contact",r.submitForm=o}angular.module("rdApp").controller("AddController",t),t.$inject=["$window","$location","contactsService"]}(),function(){"use strict";function t(t,n,e,o){function r(){var e=window.confirm("You are about to delete this contact. Press OK to confirm.");return e?o.deleteContact(a.id).then(function(){alert("The contact has been deleted."),n.path("/"),t.location.reload()}):void 0}function c(e){return o.updateContact(a.id,e).then(function(e){a.contact=e.data,a.recordUpdated=!0,n.path("/edit/"+e.data._id),t.location.reload()})}var a=this;a.titlePrefix="Edit",a.buttonLabel="Update Contact",a.showDelete=!0,a.id=e.id,a.deleteContact=r,a.submitForm=c,a.recordUpdated=!1}angular.module("rdApp").controller("EditController",t),t.$inject=["$window","$location","$routeParams","contactsService"]}(),function(){"use strict";function t(t,n){function e(t){return"CA"===t?!0:!1}function o(n){return t.getContact(n).then(function(t){var n=t.data;n.fullName=n.firstName+" "+n.lastName,r.user=n})}var r=this,c=n.id;r.user={},r.isCanada=e,"undefined"!=typeof c&&o(c)}angular.module("rdApp").controller("FormController",t),t.$inject=["contactsService","$routeParams"]}(),function(){"use strict";function t(t){t.selectedContactId="5522134c2aa3c0b86c6f497e"}angular.module("rdApp").controller("ListController",t),t.$inject=["$rootScope"]}(),function(){"use strict";function t(t,n,e,o){function r(){return o.getContacts().then(function(t){return a.contacts=t.data,a.contacts})}function c(e){var o=t.path();return"tbd"===e&&"add"===o.substr(1)?!0:null!==typeof n.id&&n.id===e?!0:!1}var a=this;a.isCurrentPage=c,a.activeItem=null,r(),e.$watch(function(){return t.path()},function(t){"/"===t&&(a.activeItem=null)})}angular.module("rdApp").controller("SecondaryController",t),t.$inject=["$location","$routeParams","$scope","contactsService"]}(),function(){"use strict";function t(){return{restrict:"A",templateUrl:"app/contacts/secondary.html",controller:"SecondaryController",controllerAs:"vm"}}angular.module("rdApp").directive("rdSecondary",t)}(),function(){"use strict";function t(t){var n=function(){return t({method:"GET",url:"/api/contacts/"})},e=function(n){return t({method:"GET",url:"/api/contacts/"+n})},o=function(n){return t({method:"DELETE",url:"/api/contacts/"+n})},r=function(n){return t({method:"POST",url:"/api/contacts/",data:n})},c=function(n,e){return t({method:"PUT",url:"/api/contacts/"+n,data:e})};return{getContacts:function(){return n()},getContact:function(t){return e(t)},deleteContact:function(t){return o(t)},addContact:function(t){return r(t)},updateContact:function(t,n){return c(t,n)}}}angular.module("rdApp").factory("contactsService",t),t.$inject=["$http","$q"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvbG9kZXgubW9kdWxlLmpzIiwicm9sb2RleC5yb3V0ZS5qcyIsImNvbnRhY3RzL2FkZC5jb250cm9sbGVyLmpzIiwiYXBwLmpzIiwiY29udGFjdHMvZWRpdC5jb250cm9sbGVyLmpzIiwiY29udGFjdHMvZm9ybS5jb250cm9sbGVyLmpzIiwiY29udGFjdHMvbGlzdC5jb250cm9sbGVyLmpzIiwiY29udGFjdHMvc2Vjb25kYXJ5LmNvbnRyb2xsZXIuanMiLCJjb250YWN0cy9zZWNvbmRhcnkuZGlyZWN0aXZlLmpzIiwiZmFjdG9yaWVzL2NvbnRhY3RzLmZhY3RvcnkuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImh0bWw1TW9kZSIsImFkZENvbnRhY3QiLCIkd2luZG93IiwiJGxvY2F0aW9uIiwiY29udGFjdHNTZXJ2aWNlIiwic3VibWl0Rm9ybSIsImNvbnRhY3QiLCJ0aGVuIiwicmVzIiwicGF0aCIsImRhdGEiLCJfaWQiLCJsb2NhdGlvbiIsInJlbG9hZCIsInZtIiwidGhpcyIsInRpdGxlUHJlZml4IiwiYnV0dG9uTGFiZWwiLCIkaW5qZWN0Iiwidmlld0NvbnRhY3QiLCIkcm91dGVQYXJhbXMiLCJkZWxldGVDb250YWN0IiwiY29uZmlybSIsIndpbmRvdyIsImlkIiwiYWxlcnQiLCJ1cGRhdGVDb250YWN0IiwicmVjb3JkVXBkYXRlZCIsInNob3dEZWxldGUiLCJmb3JtQ3RybHIiLCJpc0NhbmFkYSIsImNvdW50cnkiLCJnZXRDb250YWN0IiwiZnVsbE5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImZtIiwidXNlciIsImxpc3RDb250YWN0cyIsIiRyb290U2NvcGUiLCJzZWxlY3RlZENvbnRhY3RJZCIsIlNlY29uZGFyeUNvbnRyb2xsZXIiLCIkc2NvcGUiLCJnZXRDb250YWN0cyIsImNvbnRhY3RzIiwiaXNDdXJyZW50UGFnZSIsInN1YnN0ciIsImFjdGl2ZUl0ZW0iLCIkd2F0Y2giLCJzZWNvbmRhcnkiLCJyZXN0cmljdCIsImNvbnRyb2xsZXJBcyIsImRpcmVjdGl2ZSIsIiRodHRwIiwicmV0cmlldmVDb250YWN0cyIsIm1ldGhvZCIsInVybCIsInJldHJpZXZlQ29udGFjdCIsInJlbW92ZUNvbnRhY3QiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQUFDLE9BQUEsU0FBQSxlQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxRQUFBLElBQ0FDLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxLQUNBQyxZQUFBLCtCQUVBRCxLQUFBLGFBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEseUJBRUFGLEtBQUEsUUFDQUMsWUFBQSwwQkFDQUMsV0FBQSx3QkFFQUMsV0FDQUMsV0FBQSxNQUdBTCxFQUFBTSxXQUFBLFNDckJBLFdBQ0EsWUFLQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxHQU9BLFFBQUFDLEdBQUFDLEdBQ0EsTUFBQUYsR0FBQUgsV0FBQUssR0FDQUMsS0FBQSxTQUFBQyxHQUNBTCxFQUFBTSxLQUFBLFNBQUFELEVBQUFFLEtBQUFDLEtBQ0FULEVBQUFVLFNBQUFDLFdBVEEsR0FBQUMsR0FBQUMsSUFDQUQsR0FBQUUsWUFBQSxNQUNBRixFQUFBRyxZQUFBLGNBQ0FILEVBQUFULFdBQUFBLEVBUkFmLFFBQUFDLE9BQUEsU0FDQU0sV0FBQSxnQkFBQUksR0NrRENBLEVBQVdpQixTQUFXLFVBQVcsWUFBYSxzQkN0RC9DLFdBQ0EsWUFLQSxTQUFBQyxHQUFBakIsRUFBQUMsRUFBQWlCLEVBQUFoQixHQVdBLFFBQUFpQixLQUNBLEdBQUFDLEdBQUFDLE9BQUFELFFBQUEsNkRBRUEsT0FBQUEsR0FDQWxCLEVBQUFpQixjQUFBUCxFQUFBVSxJQUNBakIsS0FBQSxXQUNBa0IsTUFBQSxp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RUFBQWxCLEdBQ0EsTUFBQStDLElBQ0FFLE9BQUEsTUFDQUMsSUFBQSxpQkFBQWhDLEVBQ0FkLEtBQUFKLElBSUEsUUFDQXFDLFlBQUEsV0FDQSxNQUFBVyxNQUVBdEIsV0FBQSxTQUFBUixHQUNBLE1BQUFpQyxHQUFBakMsSUFFQUgsY0FBQSxTQUFBRyxHQUNBLE1BQUFrQyxHQUFBbEMsSUFFQXZCLFdBQUEsU0FBQUssR0FDQSxNQUFBTCxHQUFBSyxJQUVBb0IsY0FBQSxTQUFBRixFQUFBbEIsR0FDQSxNQUFBb0IsR0FBQUYsRUFBQWxCLEtBdkRBaEIsUUFBQUMsT0FBQSxTQUNBb0UsUUFBQSxrQkFBQXZELEdOcVJDQSxFQUFnQmMsU0FBVyxRQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJywgWyduZ1JvdXRlJ10pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJywgJycpXG5cdFx0LmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblx0XHRcdCRyb3V0ZVByb3ZpZGVyXG5cdFx0XHRcdC53aGVuKCcvJywge1xuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9jb250YWN0cy9kZWZhdWx0Lmh0bWwnXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC53aGVuKCcvZWRpdC86aWQnLCB7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRhY3RzL2VkaXQuaHRtbCcsXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ0VkaXRDb250cm9sbGVyIGFzIHZtJ1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQud2hlbignL2FkZCcsIHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvY29udGFjdHMvZWRpdC5odG1sJyxcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnQWRkQ29udHJvbGxlciBhcyB2bSdcblx0XHRcdFx0fSlcblx0XHRcdFx0Lm90aGVyd2lzZSh7XG5cdFx0XHRcdFx0cmVkaXJlY3RUbzogJy8nXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdFx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGFuZ3VsYXIubW9kdWxlKCdyZEFwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ0FkZENvbnRyb2xsZXInLCBhZGRDb250YWN0KTtcblxuXHRmdW5jdGlvbiBhZGRDb250YWN0KCR3aW5kb3csICRsb2NhdGlvbiwgY29udGFjdHNTZXJ2aWNlKSB7XG5cdFx0LyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0udGl0bGVQcmVmaXggPSAnQWRkJztcblx0XHR2bS5idXR0b25MYWJlbCA9ICdBZGQgQ29udGFjdCc7XG5cdFx0dm0uc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XG5cblx0XHRmdW5jdGlvbiBzdWJtaXRGb3JtKGNvbnRhY3QpIHtcblx0XHRcdHJldHVybiBjb250YWN0c1NlcnZpY2UuYWRkQ29udGFjdChjb250YWN0KVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXMpIHtcblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2VkaXQvJyArIHJlcy5kYXRhLl9pZCk7XG5cdFx0XHRcdFx0JHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cbn0pKCk7XG4iLG51bGwsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJylcblx0XHQuY29udHJvbGxlcignRWRpdENvbnRyb2xsZXInLCB2aWV3Q29udGFjdCk7XG5cblx0ZnVuY3Rpb24gdmlld0NvbnRhY3QoJHdpbmRvdywgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIGNvbnRhY3RzU2VydmljZSkge1xuXHRcdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLnRpdGxlUHJlZml4ID0gJ0VkaXQnO1xuXHRcdHZtLmJ1dHRvbkxhYmVsID0gJ1VwZGF0ZSBDb250YWN0Jztcblx0XHR2bS5zaG93RGVsZXRlID0gdHJ1ZTtcblx0XHR2bS5pZCA9ICRyb3V0ZVBhcmFtcy5pZDtcblx0XHR2bS5kZWxldGVDb250YWN0ID0gZGVsZXRlQ29udGFjdDtcblx0XHR2bS5zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcblx0XHR2bS5yZWNvcmRVcGRhdGVkID0gZmFsc2U7XG5cblx0XHRmdW5jdGlvbiBkZWxldGVDb250YWN0KCkge1xuXHRcdFx0dmFyIGNvbmZpcm0gPSB3aW5kb3cuY29uZmlybSgnWW91IGFyZSBhYm91dCB0byBkZWxldGUgdGhpcyBjb250YWN0LiBQcmVzcyBPSyB0byBjb25maXJtLicpO1xuXG5cdFx0XHRpZiAoY29uZmlybSkge1xuXHRcdFx0XHRyZXR1cm4gY29udGFjdHNTZXJ2aWNlLmRlbGV0ZUNvbnRhY3Qodm0uaWQpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdFx0YWxlcnQoJ1RoZSBjb250YWN0IGhhcyBiZWVuIGRlbGV0ZWQuJyk7XG5cdFx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnLycpO1xuXHRcdFx0XHRcdFx0JHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzdWJtaXRGb3JtKGNvbnRhY3QpIHtcblx0XHRcdHJldHVybiBjb250YWN0c1NlcnZpY2UudXBkYXRlQ29udGFjdCh2bS5pZCwgY29udGFjdClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKSB7XG5cdFx0XHRcdFx0dm0uY29udGFjdCA9IHJlcy5kYXRhO1xuXHRcdFx0XHRcdHZtLnJlY29yZFVwZGF0ZWQgPSB0cnVlO1xuXG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9lZGl0LycgKyByZXMuZGF0YS5faWQpO1xuXHRcdFx0XHRcdCR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRhbmd1bGFyLm1vZHVsZSgncmRBcHAnKVxuXHRcdC5jb250cm9sbGVyKCdGb3JtQ29udHJvbGxlcicsIGZvcm1DdHJscik7XG5cblx0ZnVuY3Rpb24gZm9ybUN0cmxyKGNvbnRhY3RzU2VydmljZSwgJHJvdXRlUGFyYW1zKSB7XG5cdFx0LyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXHRcdHZhciBmbSA9IHRoaXMsXG5cdFx0XHRpZCA9ICRyb3V0ZVBhcmFtcy5pZDtcblx0XHRmbS51c2VyID0ge307XG5cdFx0Zm0uaXNDYW5hZGEgPSBpc0NhbmFkYTtcblxuXHRcdGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGlkKSB7XG5cdFx0XHRnZXRDb250YWN0KGlkKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc0NhbmFkYShjb3VudHJ5KSB7XG5cdFx0XHRyZXR1cm4gKCdDQScgPT09IGNvdW50cnkpID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldENvbnRhY3QoaWQpIHtcblx0XHRcdHJldHVybiBjb250YWN0c1NlcnZpY2UuZ2V0Q29udGFjdChpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKSB7XG5cdFx0XHRcdFx0dmFyIGNvbnRhY3QgPSByZXMuZGF0YTtcblx0XHRcdFx0XHRjb250YWN0LmZ1bGxOYW1lID0gY29udGFjdC5maXJzdE5hbWUgKyAnICcgKyBjb250YWN0Lmxhc3ROYW1lO1xuXG5cdFx0XHRcdFx0Zm0udXNlciA9IGNvbnRhY3Q7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRhbmd1bGFyLm1vZHVsZSgncmRBcHAnKVxuXHRcdC5jb250cm9sbGVyKCdMaXN0Q29udHJvbGxlcicsIGxpc3RDb250YWN0cyk7XG5cblx0ZnVuY3Rpb24gbGlzdENvbnRhY3RzKCRyb290U2NvcGUpIHtcblx0XHQvLyBEbyBzdHVmZlxuXHRcdCRyb290U2NvcGUuc2VsZWN0ZWRDb250YWN0SWQgPSAnNTUyMjEzNGMyYWEzYzBiODZjNmY0OTdlJztcblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJylcblx0XHQuY29udHJvbGxlcignU2Vjb25kYXJ5Q29udHJvbGxlcicsIFNlY29uZGFyeUNvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIFNlY29uZGFyeUNvbnRyb2xsZXIoJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRzY29wZSwgY29udGFjdHNTZXJ2aWNlKSB7XG5cdFx0LyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0uaXNDdXJyZW50UGFnZSA9IGlzQ3VycmVudFBhZ2U7XG5cdFx0dm0uYWN0aXZlSXRlbSA9IG51bGw7XG5cblx0XHRnZXRDb250YWN0cygpO1xuXG5cdFx0JHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICRsb2NhdGlvbi5wYXRoKCk7XG5cdFx0XHR9LCBmdW5jdGlvbihwYXRoKSB7XG5cdFx0XHRcdGlmIChwYXRoID09PSAnLycpIHtcblx0XHRcdFx0XHR2bS5hY3RpdmVJdGVtID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHRmdW5jdGlvbiBnZXRDb250YWN0cygpIHtcblx0XHRcdHJldHVybiBjb250YWN0c1NlcnZpY2UuZ2V0Q29udGFjdHMoKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0dm0uY29udGFjdHMgPSBkYXRhLmRhdGE7XG5cdFx0XHRcdFx0cmV0dXJuIHZtLmNvbnRhY3RzO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc0N1cnJlbnRQYWdlKGlkKSB7XG5cdFx0XHR2YXIgbG9jYXRpb24gPSAkbG9jYXRpb24ucGF0aCgpO1xuXG5cdFx0XHQvLyBJcyAnYWRkJyBwYWdlP1xuXHRcdFx0aWYgKGlkID09PSAndGJkJyAmJiBsb2NhdGlvbi5zdWJzdHIoMSkgPT09ICdhZGQnKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gRG9lcyBzbHVnIG1hdGNoIHRoaXMgaWQ/XG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgJHJvdXRlUGFyYW1zLmlkICE9PSBudWxsICYmICRyb3V0ZVBhcmFtcy5pZCA9PT0gaWQpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJylcblx0XHQuZGlyZWN0aXZlKCdyZFNlY29uZGFyeScsIHNlY29uZGFyeSk7XG5cblx0ZnVuY3Rpb24gc2Vjb25kYXJ5KCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0EnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICdhcHAvY29udGFjdHMvc2Vjb25kYXJ5Lmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1NlY29uZGFyeUNvbnRyb2xsZXInLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0fTtcblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRhbmd1bGFyLm1vZHVsZSgncmRBcHAnKVxuXHRcdC5mYWN0b3J5KCdjb250YWN0c1NlcnZpY2UnLCBjb250YWN0c1NlcnZpY2UpO1xuXG5cdGZ1bmN0aW9uIGNvbnRhY3RzU2VydmljZSgkaHR0cCwgJHEpIHtcblx0XHR2YXIgcmV0cmlldmVDb250YWN0cyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0dXJsOiAnL2FwaS9jb250YWN0cy8nXG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0dmFyIHJldHJpZXZlQ29udGFjdCA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0XHR1cmw6ICcvYXBpL2NvbnRhY3RzLycgKyBpZFxuXHRcdFx0fSk7XHRcblx0XHR9O1xuXG5cdFx0dmFyIHJlbW92ZUNvbnRhY3QgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcblx0XHRcdFx0dXJsOiAnL2FwaS9jb250YWN0cy8nICsgaWRcblx0XHRcdH0pO1x0XHRcblx0XHR9O1xuXG5cdFx0dmFyIGFkZENvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL2FwaS9jb250YWN0cy8nLFxuXHRcdFx0XHRkYXRhOiBjb250YWN0XG5cdFx0XHR9KTtcdFxuXHRcdH07XG5cblx0XHR2YXIgdXBkYXRlQ29udGFjdCA9IGZ1bmN0aW9uKGlkLCBjb250YWN0KSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHR1cmw6ICcvYXBpL2NvbnRhY3RzLycgKyBpZCxcblx0XHRcdFx0ZGF0YTogY29udGFjdFxuXHRcdFx0fSk7XHRcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGdldENvbnRhY3RzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHJldHJpZXZlQ29udGFjdHMoKTtcblx0XHRcdH0sXG5cdFx0XHRnZXRDb250YWN0OiBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHRyZXR1cm4gcmV0cmlldmVDb250YWN0KGlkKTtcblx0XHRcdH0sXG5cdFx0XHRkZWxldGVDb250YWN0OiBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHRyZXR1cm4gcmVtb3ZlQ29udGFjdChpZCk7XG5cdFx0XHR9LFxuXHRcdFx0YWRkQ29udGFjdDogZnVuY3Rpb24oY29udGFjdCkge1xuXHRcdFx0XHRyZXR1cm4gYWRkQ29udGFjdChjb250YWN0KTtcblx0XHRcdH0sXG5cdFx0XHR1cGRhdGVDb250YWN0OiBmdW5jdGlvbihpZCwgY29udGFjdCkge1xuXHRcdFx0XHRyZXR1cm4gdXBkYXRlQ29udGFjdChpZCwgY29udGFjdCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9