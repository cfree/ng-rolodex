!function(){"use strict";angular.module("rdApp",["ngRoute"])}(),function(){"use strict";angular.module("rdApp","").config(["$routeProvider","$locationProvider",function(t,n){t.when("/",{templateUrl:"/app/contacts/default.html"}).when("/edit/:id",{templateUrl:"/app/contacts/edit.html",controller:"EditController as vm"}).when("/add",{templateUrl:"/app/contacts/edit.html",controller:"AddController as vm"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}])}(),function(){"use strict";function t(t,n,e){function o(o){return e.addContact(o).then(function(e){n.path("/edit/"+e.data._id),t.location.reload()})}var r=this;r.titlePrefix="Add",r.submitForm=o}angular.module("rdApp").controller("AddController",t),t.$inject=["$window","$location","contactsService"]}(),function(){"use strict";function t(t,n,e,o){function r(){var e=window.confirm("You are about to delete this contact. Press OK to confirm.");return e?o.deleteContact(a.id).then(function(){alert("The contact has been deleted."),n.path("/"),t.location.reload()}):void 0}function c(e){return o.updateContact(a.id,e).then(function(e){a.contact=e.data,a.recordUpdated=!0,n.path("/edit/"+e.data._id),t.location.reload()})}var a=this;a.titlePrefix="Edit",a.showDelete=!0,a.id=e.id,a.deleteContact=r,a.submitForm=c,a.recordUpdated=!1}angular.module("rdApp").controller("EditController",t),t.$inject=["$window","$location","$routeParams","contactsService"]}(),function(){"use strict";function t(t,n){function e(t){return"CA"===t?!0:!1}function o(n){return t.getContact(n).then(function(t){var n=t.data;n.fullName=n.firstName+" "+n.lastName,r.user=n})}var r=this,c=n.id;r.user={},r.isCanada=e,"undefined"!=typeof c&&o(c)}angular.module("rdApp").controller("FormController",t),t.$inject=["contactsService","$routeParams"]}(),function(){"use strict";function t(t){t.selectedContactId="5522134c2aa3c0b86c6f497e"}angular.module("rdApp").controller("ListController",t),t.$inject=["$rootScope"]}(),function(){"use strict";function t(t,n,e,o){function r(){return o.getContacts().then(function(t){return a.contacts=t.data,a.contacts})}function c(e){var o=t.path();return"tbd"===e&&"add"===o.substr(1)?!0:null!==typeof n.id&&n.id===e?!0:!1}var a=this;a.isCurrentPage=c,a.activeItem=null,r(),e.$watch(function(){return t.path()},function(t){"/"===t&&(a.activeItem=null)})}angular.module("rdApp").controller("SecondaryController",t),t.$inject=["$location","$routeParams","$scope","contactsService"]}(),function(){"use strict";function t(){return{restrict:"A",templateUrl:"app/contacts/secondary.html",controller:"SecondaryController",controllerAs:"vm"}}angular.module("rdApp").directive("rdSecondary",t)}(),function(){"use strict";function t(t){var n=function(){return t({method:"GET",url:"/api/contacts/"})},e=function(n){return t({method:"GET",url:"/api/contacts/"+n})},o=function(n){return t({method:"DELETE",url:"/api/contacts/"+n})},r=function(n){return t({method:"POST",url:"/api/contacts/",data:n})},c=function(n,e){return t({method:"PUT",url:"/api/contacts/"+n,data:e})};return{getContacts:function(){return n()},getContact:function(t){return e(t)},deleteContact:function(t){return o(t)},addContact:function(t){return r(t)},updateContact:function(t,n){return c(t,n)}}}angular.module("rdApp").factory("contactsService",t),t.$inject=["$http","$q"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvbG9kZXgubW9kdWxlLmpzIiwicm9sb2RleC5yb3V0ZS5qcyIsImNvbnRhY3RzL2FkZC5jb250cm9sbGVyLmpzIiwiYXBwLmpzIiwiY29udGFjdHMvZWRpdC5jb250cm9sbGVyLmpzIiwiY29udGFjdHMvZm9ybS5jb250cm9sbGVyLmpzIiwiY29udGFjdHMvbGlzdC5jb250cm9sbGVyLmpzIiwiY29udGFjdHMvc2Vjb25kYXJ5LmNvbnRyb2xsZXIuanMiLCJjb250YWN0cy9zZWNvbmRhcnkuZGlyZWN0aXZlLmpzIiwiZmFjdG9yaWVzL2NvbnRhY3RzLmZhY3RvcnkuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImh0bWw1TW9kZSIsImFkZENvbnRhY3QiLCIkd2luZG93IiwiJGxvY2F0aW9uIiwiY29udGFjdHNTZXJ2aWNlIiwic3VibWl0Rm9ybSIsImNvbnRhY3QiLCJ0aGVuIiwicmVzIiwicGF0aCIsImRhdGEiLCJfaWQiLCJsb2NhdGlvbiIsInJlbG9hZCIsInZtIiwidGhpcyIsInRpdGxlUHJlZml4IiwiJGluamVjdCIsInZpZXdDb250YWN0IiwiJHJvdXRlUGFyYW1zIiwiZGVsZXRlQ29udGFjdCIsImNvbmZpcm0iLCJ3aW5kb3ciLCJpZCIsImFsZXJ0IiwidXBkYXRlQ29udGFjdCIsInJlY29yZFVwZGF0ZWQiLCJzaG93RGVsZXRlIiwiZm9ybUN0cmxyIiwiaXNDYW5hZGEiLCJjb3VudHJ5IiwiZ2V0Q29udGFjdCIsImZ1bGxOYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJmbSIsInVzZXIiLCJsaXN0Q29udGFjdHMiLCIkcm9vdFNjb3BlIiwic2VsZWN0ZWRDb250YWN0SWQiLCJTZWNvbmRhcnlDb250cm9sbGVyIiwiJHNjb3BlIiwiZ2V0Q29udGFjdHMiLCJjb250YWN0cyIsImlzQ3VycmVudFBhZ2UiLCJzdWJzdHIiLCJhY3RpdmVJdGVtIiwiJHdhdGNoIiwic2Vjb25kYXJ5IiwicmVzdHJpY3QiLCJjb250cm9sbGVyQXMiLCJkaXJlY3RpdmUiLCIkaHR0cCIsInJldHJpZXZlQ29udGFjdHMiLCJtZXRob2QiLCJ1cmwiLCJyZXRyaWV2ZUNvbnRhY3QiLCJyZW1vdmVDb250YWN0IiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLFNBQUEsZUNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsUUFBQSxJQUNBQyxRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQ0FFLEtBQUEsS0FDQUMsWUFBQSwrQkFFQUQsS0FBQSxhQUNBQyxZQUFBLDBCQUNBQyxXQUFBLHlCQUVBRixLQUFBLFFBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsd0JBRUFDLFdBQ0FDLFdBQUEsTUFHQUwsRUFBQU0sV0FBQSxTQ3JCQSxXQUNBLFlBS0EsU0FBQUMsR0FBQUMsRUFBQUMsRUFBQUMsR0FNQSxRQUFBQyxHQUFBQyxHQUNBLE1BQUFGLEdBQUFILFdBQUFLLEdBQ0FDLEtBQUEsU0FBQUMsR0FDQUwsRUFBQU0sS0FBQSxTQUFBRCxFQUFBRSxLQUFBQyxLQUNBVCxFQUFBVSxTQUFBQyxXQVJBLEdBQUFDLEdBQUFDLElBQ0FELEdBQUFFLFlBQUEsTUFDQUYsRUFBQVQsV0FBQUEsRUFQQWYsUUFBQUMsT0FBQSxTQUNBTSxXQUFBLGdCQUFBSSxHQ2lEQ0EsRUFBV2dCLFNBQVcsVUFBVyxZQUFhLHNCQ3JEL0MsV0FDQSxZQUtBLFNBQUFDLEdBQUFoQixFQUFBQyxFQUFBZ0IsRUFBQWYsR0FVQSxRQUFBZ0IsS0FDQSxHQUFBQyxHQUFBQyxPQUFBRCxRQUFBLDZEQUVBLE9BQUFBLEdBQ0FqQixFQUFBZ0IsY0FBQU4sRUFBQVMsSUFDQWhCLEtBQUEsV0FDQWlCLE1BQUEsaUNBQ0FyQixFQUFBTSxLQUFBLEtBQ0FQLEVBQUFVLFNB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Q0FiLEtBQUFKLElBSUEsUUFDQW9DLFlBQUEsV0FDQSxNQUFBVyxNQUVBdEIsV0FBQSxTQUFBUixHQUNBLE1BQUFpQyxHQUFBakMsSUFFQUgsY0FBQSxTQUFBRyxHQUNBLE1BQUFrQyxHQUFBbEMsSUFFQXRCLFdBQUEsU0FBQUssR0FDQSxNQUFBTCxHQUFBSyxJQUVBbUIsY0FBQSxTQUFBRixFQUFBakIsR0FDQSxNQUFBbUIsR0FBQUYsRUFBQWpCLEtBdkRBaEIsUUFBQUMsT0FBQSxTQUNBbUUsUUFBQSxrQkFBQXRELEdObVJDQSxFQUFnQmEsU0FBVyxRQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJywgWyduZ1JvdXRlJ10pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJywgJycpXG5cdFx0LmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblx0XHRcdCRyb3V0ZVByb3ZpZGVyXG5cdFx0XHRcdC53aGVuKCcvJywge1xuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9jb250YWN0cy9kZWZhdWx0Lmh0bWwnXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC53aGVuKCcvZWRpdC86aWQnLCB7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRhY3RzL2VkaXQuaHRtbCcsXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ0VkaXRDb250cm9sbGVyIGFzIHZtJ1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQud2hlbignL2FkZCcsIHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvY29udGFjdHMvZWRpdC5odG1sJyxcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnQWRkQ29udHJvbGxlciBhcyB2bSdcblx0XHRcdFx0fSlcblx0XHRcdFx0Lm90aGVyd2lzZSh7XG5cdFx0XHRcdFx0cmVkaXJlY3RUbzogJy8nXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdFx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGFuZ3VsYXIubW9kdWxlKCdyZEFwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ0FkZENvbnRyb2xsZXInLCBhZGRDb250YWN0KTtcblxuXHRmdW5jdGlvbiBhZGRDb250YWN0KCR3aW5kb3csICRsb2NhdGlvbiwgY29udGFjdHNTZXJ2aWNlKSB7XG5cdFx0LyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0udGl0bGVQcmVmaXggPSAnQWRkJztcblx0XHR2bS5zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcblxuXHRcdGZ1bmN0aW9uIHN1Ym1pdEZvcm0oY29udGFjdCkge1xuXHRcdFx0cmV0dXJuIGNvbnRhY3RzU2VydmljZS5hZGRDb250YWN0KGNvbnRhY3QpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcykge1xuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvZWRpdC8nICsgcmVzLmRhdGEuX2lkKTtcblx0XHRcdFx0XHQkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cdH1cblxufSkoKTtcbiIsbnVsbCwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRhbmd1bGFyLm1vZHVsZSgncmRBcHAnKVxuXHRcdC5jb250cm9sbGVyKCdFZGl0Q29udHJvbGxlcicsIHZpZXdDb250YWN0KTtcblxuXHRmdW5jdGlvbiB2aWV3Q29udGFjdCgkd2luZG93LCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgY29udGFjdHNTZXJ2aWNlKSB7XG5cdFx0LyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0udGl0bGVQcmVmaXggPSAnRWRpdCc7XG5cdFx0dm0uc2hvd0RlbGV0ZSA9IHRydWU7XG5cdFx0dm0uaWQgPSAkcm91dGVQYXJhbXMuaWQ7XG5cdFx0dm0uZGVsZXRlQ29udGFjdCA9IGRlbGV0ZUNvbnRhY3Q7XG5cdFx0dm0uc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XG5cdFx0dm0ucmVjb3JkVXBkYXRlZCA9IGZhbHNlO1xuXG5cdFx0ZnVuY3Rpb24gZGVsZXRlQ29udGFjdCgpIHtcblx0XHRcdHZhciBjb25maXJtID0gd2luZG93LmNvbmZpcm0oJ1lvdSBhcmUgYWJvdXQgdG8gZGVsZXRlIHRoaXMgY29udGFjdC4gUHJlc3MgT0sgdG8gY29uZmlybS4nKTtcblxuXHRcdFx0aWYgKGNvbmZpcm0pIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRhY3RzU2VydmljZS5kZWxldGVDb250YWN0KHZtLmlkKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRcdGFsZXJ0KCdUaGUgY29udGFjdCBoYXMgYmVlbiBkZWxldGVkLicpO1xuXHRcdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0XHRcdFx0XHRcdCR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc3VibWl0Rm9ybShjb250YWN0KSB7XG5cdFx0XHRyZXR1cm4gY29udGFjdHNTZXJ2aWNlLnVwZGF0ZUNvbnRhY3Qodm0uaWQsIGNvbnRhY3QpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcykge1xuXHRcdFx0XHRcdHZtLmNvbnRhY3QgPSByZXMuZGF0YTtcblx0XHRcdFx0XHR2bS5yZWNvcmRVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvZWRpdC8nICsgcmVzLmRhdGEuX2lkKTtcblx0XHRcdFx0XHQkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cdH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJylcblx0XHQuY29udHJvbGxlcignRm9ybUNvbnRyb2xsZXInLCBmb3JtQ3RybHIpO1xuXG5cdGZ1bmN0aW9uIGZvcm1DdHJscihjb250YWN0c1NlcnZpY2UsICRyb3V0ZVBhcmFtcykge1xuXHRcdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0XHR2YXIgZm0gPSB0aGlzLFxuXHRcdFx0aWQgPSAkcm91dGVQYXJhbXMuaWQ7XG5cdFx0Zm0udXNlciA9IHt9O1xuXHRcdGZtLmlzQ2FuYWRhID0gaXNDYW5hZGE7XG5cblx0XHRpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBpZCkge1xuXHRcdFx0Z2V0Q29udGFjdChpZCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaXNDYW5hZGEoY291bnRyeSkge1xuXHRcdFx0cmV0dXJuICgnQ0EnID09PSBjb3VudHJ5KSA/IHRydWUgOiBmYWxzZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRDb250YWN0KGlkKSB7XG5cdFx0XHRyZXR1cm4gY29udGFjdHNTZXJ2aWNlLmdldENvbnRhY3QoaWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcykge1xuXHRcdFx0XHRcdHZhciBjb250YWN0ID0gcmVzLmRhdGE7XG5cdFx0XHRcdFx0Y29udGFjdC5mdWxsTmFtZSA9IGNvbnRhY3QuZmlyc3ROYW1lICsgJyAnICsgY29udGFjdC5sYXN0TmFtZTtcblxuXHRcdFx0XHRcdGZtLnVzZXIgPSBjb250YWN0O1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cdH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJylcblx0XHQuY29udHJvbGxlcignTGlzdENvbnRyb2xsZXInLCBsaXN0Q29udGFjdHMpO1xuXG5cdGZ1bmN0aW9uIGxpc3RDb250YWN0cygkcm9vdFNjb3BlKSB7XG5cdFx0Ly8gRG8gc3R1ZmZcblx0XHQkcm9vdFNjb3BlLnNlbGVjdGVkQ29udGFjdElkID0gJzU1MjIxMzRjMmFhM2MwYjg2YzZmNDk3ZSc7XG5cdH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdyZEFwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ1NlY29uZGFyeUNvbnRyb2xsZXInLCBTZWNvbmRhcnlDb250cm9sbGVyKTtcblxuXHRmdW5jdGlvbiBTZWNvbmRhcnlDb250cm9sbGVyKCRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkc2NvcGUsIGNvbnRhY3RzU2VydmljZSkge1xuXHRcdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLmlzQ3VycmVudFBhZ2UgPSBpc0N1cnJlbnRQYWdlO1xuXHRcdHZtLmFjdGl2ZUl0ZW0gPSBudWxsO1xuXG5cdFx0Z2V0Q29udGFjdHMoKTtcblxuXHRcdCRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAkbG9jYXRpb24ucGF0aCgpO1xuXHRcdFx0fSwgZnVuY3Rpb24ocGF0aCkge1xuXHRcdFx0XHRpZiAocGF0aCA9PT0gJy8nKSB7XG5cdFx0XHRcdFx0dm0uYWN0aXZlSXRlbSA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0ZnVuY3Rpb24gZ2V0Q29udGFjdHMoKSB7XG5cdFx0XHRyZXR1cm4gY29udGFjdHNTZXJ2aWNlLmdldENvbnRhY3RzKClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdHZtLmNvbnRhY3RzID0gZGF0YS5kYXRhO1xuXHRcdFx0XHRcdHJldHVybiB2bS5jb250YWN0cztcblx0XHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaXNDdXJyZW50UGFnZShpZCkge1xuXHRcdFx0dmFyIGxvY2F0aW9uID0gJGxvY2F0aW9uLnBhdGgoKTtcblxuXHRcdFx0Ly8gSXMgJ2FkZCcgcGFnZT9cblx0XHRcdGlmIChpZCA9PT0gJ3RiZCcgJiYgbG9jYXRpb24uc3Vic3RyKDEpID09PSAnYWRkJykge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdC8vIERvZXMgc2x1ZyBtYXRjaCB0aGlzIGlkP1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mICRyb3V0ZVBhcmFtcy5pZCAhPT0gbnVsbCAmJiAkcm91dGVQYXJhbXMuaWQgPT09IGlkKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGFuZ3VsYXIubW9kdWxlKCdyZEFwcCcpXG5cdFx0LmRpcmVjdGl2ZSgncmRTZWNvbmRhcnknLCBzZWNvbmRhcnkpO1xuXG5cdGZ1bmN0aW9uIHNlY29uZGFyeSgpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAnYXBwL2NvbnRhY3RzL3NlY29uZGFyeS5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdTZWNvbmRhcnlDb250cm9sbGVyJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdH07XG5cdH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3JkQXBwJylcblx0XHQuZmFjdG9yeSgnY29udGFjdHNTZXJ2aWNlJywgY29udGFjdHNTZXJ2aWNlKTtcblxuXHRmdW5jdGlvbiBjb250YWN0c1NlcnZpY2UoJGh0dHAsICRxKSB7XG5cdFx0dmFyIHJldHJpZXZlQ29udGFjdHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJy9hcGkvY29udGFjdHMvJ1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdHZhciByZXRyaWV2ZUNvbnRhY3QgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0dXJsOiAnL2FwaS9jb250YWN0cy8nICsgaWRcblx0XHRcdH0pO1x0XG5cdFx0fTtcblxuXHRcdHZhciByZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oaWQpIHtcblx0XHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0RFTEVURScsXG5cdFx0XHRcdHVybDogJy9hcGkvY29udGFjdHMvJyArIGlkXG5cdFx0XHR9KTtcdFx0XG5cdFx0fTtcblxuXHRcdHZhciBhZGRDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xuXHRcdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9hcGkvY29udGFjdHMvJyxcblx0XHRcdFx0ZGF0YTogY29udGFjdFxuXHRcdFx0fSk7XHRcblx0XHR9O1xuXG5cdFx0dmFyIHVwZGF0ZUNvbnRhY3QgPSBmdW5jdGlvbihpZCwgY29udGFjdCkge1xuXHRcdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUFVUJyxcblx0XHRcdFx0dXJsOiAnL2FwaS9jb250YWN0cy8nICsgaWQsXG5cdFx0XHRcdGRhdGE6IGNvbnRhY3Rcblx0XHRcdH0pO1x0XG5cdFx0fTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRnZXRDb250YWN0czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiByZXRyaWV2ZUNvbnRhY3RzKCk7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0Q29udGFjdDogZnVuY3Rpb24oaWQpIHtcblx0XHRcdFx0cmV0dXJuIHJldHJpZXZlQ29udGFjdChpZCk7XG5cdFx0XHR9LFxuXHRcdFx0ZGVsZXRlQ29udGFjdDogZnVuY3Rpb24oaWQpIHtcblx0XHRcdFx0cmV0dXJuIHJlbW92ZUNvbnRhY3QoaWQpO1xuXHRcdFx0fSxcblx0XHRcdGFkZENvbnRhY3Q6IGZ1bmN0aW9uKGNvbnRhY3QpIHtcblx0XHRcdFx0cmV0dXJuIGFkZENvbnRhY3QoY29udGFjdCk7XG5cdFx0XHR9LFxuXHRcdFx0dXBkYXRlQ29udGFjdDogZnVuY3Rpb24oaWQsIGNvbnRhY3QpIHtcblx0XHRcdFx0cmV0dXJuIHVwZGF0ZUNvbnRhY3QoaWQsIGNvbnRhY3QpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==